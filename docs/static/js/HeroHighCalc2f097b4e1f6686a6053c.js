(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{433:function(e,t,a){"use strict";t.a=[{name:"Tier 1-1",success:70,hploss:200,exp:100,reward:.003135},{name:"Tier 1-2",success:67,hploss:200,exp:110,reward:.003762},{name:"Tier 1-3",success:63,hploss:200,exp:120,reward:.004389},{name:"Tier 2-1",success:59,hploss:200,exp:130,reward:.005016},{name:"Tier 2-2",success:55,hploss:200,exp:150,reward:.005643},{name:"Tier 2-3",success:51,hploss:200,exp:200,reward:.00627},{name:"Boss 1",success:28,hploss:400,exp:400,reward:.02299}]},438:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"h",(function(){return l})),a.d(t,"g",(function(){return d})),a.d(t,"c",(function(){return w})),a.d(t,"d",(function(){return C})),a.d(t,"e",(function(){return _})),a.d(t,"f",(function(){return k}));var n=a(465),r=a.n(n),s=a(433),i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(e){return r.a.encode(e)},c=function(e){return r.a.decode(e)},u=function(e){try{return JSON.parse(e)}catch(e){return""}},l=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];localStorage[o(e)]=o(a?JSON.stringify(t):t)},d=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=localStorage[o(e)];if(a)try{var n=c(a);return t?u(n):n}catch(e){return""}return""},h=function(){for(var e=[],t=0,a=1;a<102;a++){var n=~~((a-2)/10),r=1e3;1===n?r=2e3:n>1&&(r=1e3+500*(n+1)),t+=r,e.push(t)}return e}(),p=function(e){return 2==+e?30:3==+e?60:4==+e?140:0},f=function(e){return 2==+e?3:3==+e?6:4==+e?16:0},v=function(e){return 2==+e?-5:3==+e?-13:4==+e?-28:0},m=function(e){return 2==+e?30:3==+e?60:4==+e?90:0},y=function(e){var t=h.findIndex((function(t){return e<t}));return-1===t?101:t},g=function(e,t,a){var n=e*(100+t)/100;return n+a*n/1500},b=function(e,t){return Math.ceil(e-t/20)},w=function(e){var t=e.card,a=e.build,n=(e.gas,i(t,4)),r=n[0],s=n[1],o=n[2],c=n[3],u=i(a,4),l=u[0],d=u[1],h=u[2],y=u[3],g=p(l),b=f(d),w=v(h),C=86.4*(100+w)/100;return{buildData:{attr:g,reward:b,exp:m(y),dishp:w},cardData:{vatk:10*(r-1)+s+g,vdef:10*(r-1)+o+g,vagi:10*(r-1)+c+g,hpcd:C,everyDayHp:(86400/C).strip(4)}}},C=function(e){var t=e.card,a=e.build,n=(e.gas,i(t,4)),r=n[0],s=n[1],o=n[2],c=n[3],u=y(r),l=i(a,4),d=l[0],h=l[1],g=l[2],b=l[3],w=p(d),C=f(h),_=v(g),k=86.4*(100+_)/100;return{buildData:{attr:w,reward:C,exp:m(b),dishp:_},cardData:{initExp:r,initLv:u,vatk:10*(u-1)+s+w,vdef:10*(u-1)+o+w,vagi:10*(u-1)+c+w,hpcd:k,everyDayHp:(86400/k).strip(4)}}},_=function(e){var t=e.cardData,a=e.buildData,n=e.gas,r=t.vatk,i=t.vdef,o=t.vagi,c=t.everyDayHp,u=a.reward,l=a.exp;return s.a.map((function(e){var t=e.name,a=e.success,s=e.hploss,d=e.exp,h=e.reward,p=a+r/100,f=g(h,u,o),v=b(s,i),m=c/(((100-p)*s+p*v)/100),y=p/100*(d+l),w=Math.ceil(m*y),C=(m*(p/100*f-n)).strip(4);return{name:t,successC:p,rewardC:f.strip(8),hplossC:v,everyXp:w,everyRewrad:C}}))},k=function(e){e.card;var t=e.cardData,a=e.buildData,n=e.gas,r=e.totalHp,i=e.enemyType,o=t.initLv,c=t.initExp,u=t.vatk,l=t.vdef,d=t.vagi,h=a.reward,p=a.exp,f=s.a[i],v=(f.name,f.success),m=f.hploss,w=f.exp,C=f.reward,_=[],k=o,x=+r,D=c,T=0,S=u,H=l,O=d;return function e(){if(T++,x<m)return _;var t=10*(v+u/100),a=g(C,h,O),r=p+w,s=b(m,H),i=Math.floor((1e3*Math.random()+1)%1e3)<t;if(i){x-=s,D+=r;var o="#"+T+" Lv"+k+" 戰鬥成功 獎勵: "+a.strip(8)+" 獲得經驗: "+r+" HP損失: "+s;_.unshift({type:"Fight",isSuccess:i,hploss:s,rewards:a,exp:r,gas:n,lv:k,log:o,atk:S,def:H,agi:O,count:T});var c=y(D);if(c>k){var l="#"+ ++T+" 升級 "+c;S+=10,H+=10,O+=10,k=c,_.unshift({type:"level up",gas:n,lv:k,atk:S,def:H,agi:O,log:l,count:T})}return e()}x-=m;var d="#"+T+" 戰鬥失敗 Lv"+k+" HP損失: "+m;return _.unshift({type:"Fight",isSuccess:i,hploss:m,rewards:0,exp:0,gas:n,lv:k,atk:S,def:H,agi:O,log:d,count:T}),e()}()}},483:function(e,t,a){"use strict";t.a=[{name:"傳說 Legendary",arr:[{name:"Sir Asten (澄騎)",card:[800,700,600]},{name:"URIAH THE SAGE (澄法)",card:[800,700,600]},{name:"DUKE DUSCAIR IV (澄騎)",card:[800,700,600]}]},{name:"史詩 EPIC",arr:[{name:"Elrik The Imbuer (紫賊)",card:[900,500,500]},{name:"Xegis Branfyre (紫法)",card:[800,500,600]},{name:"Helia Stormcall (紫法)",card:[800,400,700]}]},{name:"稀有",arr:[{name:"Arnulf of Esplin (藍校尉)",card:[600,700,400]},{name:"Sir Bertrand (藍光頭)",card:[600,600,500]},{name:"Lady Ella of Tir (藍法)",card:[600,400,700]},{name:"Balen Fellwood (藍獵人)",card:[700,500,500]}]},{name:"罕見",arr:[{name:"Demisov The Bold (綠光頭)",card:[500,800,300]},{name:"Thalas One-Eye (綠獵)",card:[700,300,600]},{name:"Reis Of The Knife (綠賊)",card:[500,300,800]},{name:"Andin Olis (綠士兵)",card:[500,500,600]}]},{name:"普通",arr:[{name:"Esfel Of Lordan (黃賊)",card:[400,300,800]},{name:"Dayne of Gerston (黃劍兵)",card:[500,500,500]},{name:"Jan Rhylen (黃盾兵)",card:[500,700,300]},{name:"Sivalas Zefen (黃獵人)",card:[600,300,600]},{name:"Torlov Branhart (黃民兵)",card:[500,600,400]},{name:"Lena Ashwood (黃女獵)",card:[500,400,600]}]}]},513:function(e,t,a){"use strict";var n={name:"CalcInput",props:{v:Array,PH:Array}},r=a(2),s=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Row",e._l(e.v,(function(t,n){return a("Col",{key:n,attrs:{span:24/e.v.length}},[a("Input",{attrs:{number:"",placeholder:e.PH[n]},model:{value:e.v[n],callback:function(t){e.$set(e.v,n,t)},expression:"v[i]"}})],1)})),1)}),[],!1,null,null,null);t.a=s.exports},518:function(e,t,a){},519:function(e,t,a){},629:function(e,t,a){"use strict";a(518)},630:function(e,t,a){"use strict";a(519)},936:function(e,t,a){"use strict";a.r(t);var n=a(438),r=a(483),s=a(433),i=a(484),o=a.n(i),c={name:"item-component",data:function(){return{columns:[{title:"獎勵 Rewards",key:"rewards"},{title:"經驗值 EXP",key:"exp"},{title:"損血 Hploss",key:"hploss"},{title:"燃料費 Gas",key:"gas"}],columns2:[{title:"戰鬥紀錄",key:"log"}],rowClassName:this.source.isSuccess?"":this.source.hploss?"fair":"others"}},props:{index:{type:Number},source:{type:Object,default:function(){return{}}}},methods:{handleRowClick:function(){this.$parent.$parent.$parent.filterHero=this.source._heroId,this.$parent.$parent.$parent.filterEnemyType=this.source.enemyType}}},u=(a(629),a(2)),l=Object(u.a)(c,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex",class:e.rowClassName},e._l(e.columns2,(function(t){return a("div",{key:t.key+e.source.date},[e._v(e._s(e.source[t.key]))])})),0)}),[],!1,null,"0bc9b32a",null).exports,d=a(513),h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw s}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function p(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var f={name:"HeroCalc",components:{CalcInput:d.a,VirtualList:o.a},data:function(){var e=Object(n.g)("HeroHighCalc")||[];return{item:l,heroData:r.a,enemiesData:s.a,days:"",gas:"",name:"",name2:"",enemyType:1,card:["","","",""],build:["","","",""],columns:[{title:"獎勵 Rewards",key:"rewards"},{title:"經驗值 EXP",key:"exp"},{title:"損血 Hploss",key:"hploss"},{title:"燃料費 Gas",key:"gas"}],columns2:[{title:"戰鬥紀錄",key:"log"}],tableData:[],storage:e}},mounted:function(){try{var e=JSON.parse(Object(n.a)(this.$route.query.search)),t=e.card,a=e.build,r=e.name,s=e.gas,i=e.enemyType,o=e.days;this.card=t,this.enemyType=i,this.days=o,this.build=a,this.name=r,this.gas=s,this.handleCalc(!1)}catch(e){}},computed:{getheroData:function(){return this.heroData},fightCount:function(){return this.tableData.filter((function(e){return"Fight"===e.type})).length},fightSuccess:function(){return this.tableData.filter((function(e){return e.isSuccess})).length},fightFair:function(){return this.fightCount-this.fightSuccess},totalRewards:function(){return this.tableData.reduce((function(e,t){var a=t.rewards;return e+(void 0===a?0:a)}),0)},successGas:function(){return this.tableData.reduce((function(e,t){var a=t.gas;return e+ +(void 0===a?0:a)}),0)}},methods:{handleChange:function(e){var t=e.split("."),a=h(t,2),n=a[0],r=a[1],s=this.getheroData[n].arr[r],i=s.name,o=s.card;this.card=[this.card[0]].concat(p(o)),this.name=i},handleCalc:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(n.b)(JSON.stringify({build:this.build,card:this.card,name:this.name,gas:this.gas,enemyType:this.enemyType,days:this.days}));this.$router.push({path:"",query:{search:t}});var a=Object(n.d)(this),r=a.buildData,s=a.cardData;if(this.tableData=Object(n.f)({buildData:r,cardData:s,gas:this.gas,enemyType:this.enemyType,totalHp:this.days*s.everyDayHp,card:this.card}),e){var i=[].concat(p(this.build)),o=[].concat(p(this.card)),c=this.name;this.storage.unshift({name:c,build:i,card:o,days:this.days,enemyType:this.enemyType}),this.storage.length>7&&this.storage.pop(),Object(n.h)("HeroHighCalc",this.storage)}},handleRecodeCalc:function(e){var t=this.storage[e],a=t.build,n=t.card,r=t.name;this.name=r,this.card=[].concat(p(n)),this.build=[].concat(p(a)),this.handleCalc(!1)}}},v=(a(630),Object(u.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("Row",[a("Col",{attrs:{span:"12"}},[a("Row",[a("Col",{attrs:{span:"24"}},[a("Button",{attrs:{type:"info",long:""}},[e._v("\n                      建築物等級 Building Level\n                  ")])],1)],1),e._v(" "),a("CalcInput",{attrs:{v:e.build,PH:["Training Ground","BNB Vault","Town Inn","Barracks"]}}),e._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("Button",{attrs:{type:"info",long:""}},[e._v("\n                      卡片資料 Card\n                  ")])],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("Select",{attrs:{placeholder:"英雄列表 Hero List",filterable:"",long:""},on:{input:e.handleChange},model:{value:e.name2,callback:function(t){e.name2=t},expression:"name2"}},e._l(e.getheroData,(function(t,n){return a("OptionGroup",{key:t.name,attrs:{label:t.name}},e._l(t.arr,(function(e,t){return a("Option",{key:e.name,attrs:{value:n+"."+t,label:e.name}})})),1)})),1)],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{attrs:{placeholder:"英雄名稱 Hero"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("Select",{attrs:{placeholder:"怪物列表 Enemies List"},model:{value:e.enemyType,callback:function(t){e.enemyType=t},expression:"enemyType"}},e._l(e.enemiesData,(function(e,t){return a("Option",{key:e.name,attrs:{value:t,label:e.name}})})),1)],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("Input",{attrs:{placeholder:"Gas"},model:{value:e.gas,callback:function(t){e.gas=t},expression:"gas"}})],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("Button",{attrs:{type:"info",long:""}},[e._v("\n                      初始經驗 Exp、攻 atk、防 def、速 agi\n                  ")])],1)],1),e._v(" "),a("CalcInput",{attrs:{v:e.card,PH:["初始經驗","攻擊 Atk","防禦 Def","速度 Agi"]}}),e._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{placeholder:"試算天數 Calc Days"},model:{value:e.days,callback:function(t){e.days=t},expression:"days"}})],1),e._v(" "),a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"success",long:"",icon:"ios-search"},on:{click:e.handleCalc}},[e._v("\n                      計算(calculate)\n                  ")])],1)],1)],1),e._v(" "),a("Col",{attrs:{span:"12"}},e._l(e.storage,(function(t,n){var r=t.name,s=t.card,i=t.build,o=t.enemyType;return a("Button",{key:n,attrs:{type:"ghost",long:"",icon:"ios-search"},on:{click:function(t){return e.handleRecodeCalc(n)}}},[e._v("\n              "+e._s(r+" vs "+e.enemiesData[o].name+" | "+s.join()+"|"+i.join())+"\n          ")])})),1)],1),e._v(" "),e.tableData.length?a("Row",[a("Col",{staticClass:"info",attrs:{span:"24"}},[e._v("\n          總戰鬥次數: "+e._s(e.fightCount)+"\n          戰鬥成功: "+e._s(e.fightSuccess)+"\n          戰鬥失敗: "+e._s(e.fightFair)+"\n          實際勝率: "+e._s((e.fightSuccess/e.fightCount*100).toFixed(2))+"%\n      ")]),e._v(" "),a("Col",{staticClass:"info2",attrs:{span:"24"}},[e._v("\n          獎金(BNB): "+e._s(e.totalRewards.toFixed(4))+"\n          瓦斯費(BNB): "+e._s(e.successGas.toFixed(4))+"\n      ")])],1):e._e(),e._v(" "),a("div",{staticClass:"flex"},e._l(e.columns2,(function(t){return a("div",{key:t.key},[e._v(e._s(t.title))])})),0),e._v(" "),a("VirtualList",{staticStyle:{height:"calc(100vh - 486px)","overflow-y":"auto"},attrs:{"data-key":"count","data-sources":e.tableData,"data-component":e.item}})],1)}),[],!1,null,"78ef9606",null));t.default=v.exports}}]);
//# sourceMappingURL=HeroHighCalc2f097b4e1f6686a6053c.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{433:function(e,t,r){"use strict";t.a=[{name:"Tier 1-1",success:70,hploss:200,exp:100,reward:.003135},{name:"Tier 1-2",success:67,hploss:200,exp:110,reward:.003762},{name:"Tier 1-3",success:63,hploss:200,exp:120,reward:.004389},{name:"Tier 2-1",success:59,hploss:200,exp:130,reward:.005016},{name:"Tier 2-2",success:55,hploss:200,exp:150,reward:.005643},{name:"Tier 2-3",success:51,hploss:200,exp:200,reward:.00627},{name:"Boss 1",success:28,hploss:400,exp:400,reward:.02299}]},439:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return o})),r.d(t,"h",(function(){return u})),r.d(t,"g",(function(){return p})),r.d(t,"c",(function(){return x})),r.d(t,"d",(function(){return k})),r.d(t,"e",(function(){return C})),r.d(t,"f",(function(){return O}));var a=r(462),n=r.n(a),i=r(433),s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){n=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(e){return n.a.encode(e)},o=function(e){return n.a.decode(e)},c=function(e){try{return JSON.parse(e)}catch(e){return""}},u=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];localStorage[l(e)]=l(r?JSON.stringify(t):t)},p=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=localStorage[l(e)];if(r)try{var a=o(r);return t?c(a):a}catch(e){return""}return""},f=function(){for(var e=[],t=0,r=1;r<102;r++){var a=~~((r-2)/10),n=1e3;1===a?n=2e3:a>1&&(n=1e3+500*(a+1)),t+=n,e.push(t)}return e}(),d=function(e){return 2==+e?30:3==+e?60:4==+e?140:0},v=function(e){return 2==+e?3:3==+e?6:4==+e?16:0},h=function(e){return 2==+e?-5:3==+e?-13:4==+e?-28:0},y=function(e){return 2==+e?30:3==+e?60:4==+e?90:0},g=function(e){var t=f.findIndex((function(t){return e<t}));return-1===t?101:t},m=function(e,t,r){var a=e*(100+t)/100;return a+r*a/1500},b=function(e,t){return Math.ceil(e-t/20)},x=function(e){var t=e.card,r=e.build,a=(e.gas,s(t,4)),n=a[0],i=a[1],l=a[2],o=a[3],c=s(r,4),u=c[0],p=c[1],f=c[2],g=c[3],m=d(u),b=v(p),x=h(f),k=86.4*(100+x)/100;return{buildData:{attr:m,reward:b,exp:y(g),dishp:x},cardData:{vatk:10*(n-1)+i+m,vdef:10*(n-1)+l+m,vagi:10*(n-1)+o+m,hpcd:k,everyDayHp:(86400/k).strip(4)}}},k=function(e){var t=e.card,r=e.build,a=(e.gas,s(t,4)),n=a[0],i=a[1],l=a[2],o=a[3],c=g(n),u=s(r,4),p=u[0],f=u[1],m=u[2],b=u[3],x=d(p),k=v(f),C=h(m),O=86.4*(100+C)/100;return{buildData:{attr:x,reward:k,exp:y(b),dishp:C},cardData:{initExp:n,initLv:c,vatk:10*(c-1)+i+x,vdef:10*(c-1)+l+x,vagi:10*(c-1)+o+x,hpcd:O,everyDayHp:(86400/O).strip(4)}}},C=function(e){var t=e.cardData,r=e.buildData,a=e.gas,n=t.vatk,s=t.vdef,l=t.vagi,o=t.everyDayHp,c=r.reward,u=r.exp;return i.a.map((function(e){var t=e.name,r=e.success,i=e.hploss,p=e.exp,f=e.reward,d=r+n/100,v=m(f,c,l),h=b(i,s),y=o/(((100-d)*i+d*h)/100),g=d/100*(p+u),x=Math.ceil(y*g),k=(y*(d/100*v-a)).strip(4);return{name:t,successC:d,rewardC:v.strip(8),hplossC:h,everyXp:x,everyRewrad:k}}))},O=function(e){e.card;var t=e.cardData,r=e.buildData,a=e.gas,n=e.totalHp,s=e.enemyType,l=t.initLv,o=t.initExp,c=t.vatk,u=t.vdef,p=t.vagi,f=r.reward,d=r.exp,v=i.a[s],h=(v.name,v.success),y=v.hploss,x=v.exp,k=v.reward,C=[],O=l,w=+n,T=o,_=0,j=c,L=u,P=p,N=0,M=0,D=0,H=0;return function e(){if(_++,w<y)return{arr:C,maxSuccess:N,maxFair:D};var t=10*(h+c/100),r=m(k,f,P),n=d+x,i=b(y,L),s=Math.floor((1e3*Math.random()+1)%1e3)<t;if(s){H=0,N<++M&&(N=M),w-=i;var l="#"+_+" Lv"+O+"("+(T+=n)+") 戰鬥成功 獎勵: "+r.strip(8)+" 獲得經驗: "+n+" HP損失: "+i;C.unshift({type:"Fight",isSuccess:s,hploss:i,rewards:r,exp:n,gas:a,lv:O,log:l,atk:j,def:L,agi:P,count:_,totalExp:T});var o=g(T);if(o>O){var u="#"+ ++_+" 升級 "+o;j+=10,L+=10,P+=10,O=o,C.unshift({type:"level up",gas:a,lv:O,atk:j,def:L,agi:P,log:u,count:_,rewards:"",exp:"",hploss:"",totalExp:T})}return e()}M=0,D<++H&&(D=H),w-=y;var p="#"+_+" 戰鬥失敗 Lv"+O+" HP損失: "+y;return C.unshift({type:"Fight",isSuccess:s,hploss:y,rewards:0,exp:0,gas:a,lv:O,atk:j,def:L,agi:P,log:p,count:_,totalExp:T}),e()}()}},608:function(e,t,r){},609:function(e,t,r){},908:function(e,t,r){"use strict";r(608)},909:function(e,t,r){"use strict";r(609)},916:function(e,t,r){"use strict";r.r(t);var a=r(516),n=r.n(a),i=r(481),s=r.n(i),l={name:"item-component",data:function(){var e=this;return{typeObjClass:{1:"",2:"green",3:"blue",4:"purple",5:"orange"},columns:[{title:"編號 No.",key:"tokenId"},{title:"官方頁數 Page",key:"page"},{title:"名字 Name",key:"name"},{title:"職業 Class",key:"heroClass"},{title:"稀有度 Type",key:"heroTypeName",classFn:function(t){var r=t.heroType;return e.typeObjClass[r]+" type"}},{title:"等級 Level",key:"level"},{title:"經驗 EXP",key:"xp"},{title:"價錢 Price",key:"price",classFn:function(){return"right"}}]}},props:{index:{type:Number},source:{type:Object,default:function(){return{}}}}},o=(r(908),r(2)),c=Object(o.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex"},e._l(e.columns,(function(t){return r("div",{key:t.key+e.source.date,staticClass:"center",class:t.classFn&&t.classFn(e.source)},[e._v(e._s(e.source[t.key]))])})),0)}),[],!1,null,"28fffcf8",null).exports,u=r(439),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function f(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function a(n,i){try{var s=t[n](i),l=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(l).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(l)}("next")}))}}var d={name:"Market",components:{VirtualList:s.a},data:function(){return{item:c,api:"https://bnbheroes.io/api/market.php",contractData:void 0,filterNo:Object(u.g)("filterNo")||"",filterHero:Object(u.g)("filterHero")||"",filterMoney:Object(u.g)("filterMoney")||"",filterClass:Object(u.g)("filterClass")||"",filterType:Object(u.g)("filterType")||"1",filterType2:Object(u.g)("filterType2")||"5",filterLevel:Object(u.g)("filterLevel")||"",listings:0,params:{page:0,limit:Object(u.g)("pageLimit")||200,rare:0,order:"id",dir:"asc"},columns:[{title:"編號 No.",key:"tokenId"},{title:"官方頁數 Page",key:"page"},{title:"名字 Name",key:"name"},{title:"職業 Class",key:"heroClass"},{title:"稀有度 Type",key:"heroTypeName"},{title:"等級 Level",key:"level"},{title:"經驗 EXP",key:"xp"},{title:"價錢 Price",key:"price"}],data:[],typeObj:{1:"普通 Common",2:"罕見 Uncommon",3:"稀有 Rare",4:"史詩 Epic",5:"傳說 Legendary"},classObj:{1:"士兵 Soldier",2:"獵人 Hunter",3:"刺客 Rogue",4:"法師 Mage",5:"騎士 Knight"},orderIndex:0,orderArr:[{order:"id",dir:"asc",text:"Oldest"},{order:"id",dir:"desc",text:"Newest"},{order:"price",dir:"asc",text:"Price Asc"},{order:"price",dir:"desc",text:"Price Desc"}],isLoading:!0}},beforeMount:function(){var e=this;return f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getCharactersForPage(1);case 1:case"end":return t.stop()}}),t,e)})))()},methods:{getCharactersForPage:function(e){var t=this;return f(regeneratorRuntime.mark((function r(){var a,i,s,l,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e&&(t.params.page=e-1),t.isLoading=!0,r.prev=2,+(a=p({},t.params)).rare||(a.rare=void 0),r.next=7,n.a.get(t.api,{params:a});case 7:i=r.sent,s=i.data,l=s.data,o=s.count,t.listings=+o,t.handleMarkData(l),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(2),t.data=[];case 17:t.isLoading=!1;case 18:case"end":return r.stop()}}),r,t,[[2,14]])})))()},handlePageLimit:function(e){this.params.limit=e,this.getCharactersForPage(1)},handleMarkData:function(e){var t=this;this.data=e.map((function(e,r){var a=p({},e);a.priceText=a.price+" BNB",a.heroTypeName=t.typeObj[a.heroType],a.heroClass=t.classObj[a.heroClass];var n=t.params.page*t.params.limit+r+1;return a.page=Math.ceil(n/12),a})),Object(u.h)("filterNo",this.filterNo),Object(u.h)("filterHero",this.filterHero),Object(u.h)("filterMoney",this.filterMoney),Object(u.h)("filterClass",this.filterClass),Object(u.h)("filterType",this.filterType),Object(u.h)("filterType2",this.filterType2),Object(u.h)("pageLimit",this.params.limit),Object(u.h)("filterLevel",this.filterLevel)}},computed:{tableData:function(){var e=this;return this.filterNo||this.filterHero||this.filterMoney||this.filterClass||this.filterType||this.filterType2||this.filterLevel?this.data.filter((function(t){var r=t.tokenId,a=t.name,n=t.heroClass,i=t.heroType,s=t.price,l=t.level;return(r.includes(e.filterNo)||!e.filterNo)&&(a.includes(e.filterHero)||!e.filterHero)&&(n.includes(e.filterClass)||!e.filterClass)&&(+e.filterMoney>+s||!e.filterMoney)&&(+i>=+e.filterType||!e.filterType)&&(+e.filterType2>=+i||!e.filterType2)&&(+l>=+e.filterLevel||!e.filterLevel)})):this.data},calcOrder:{get:function(){return this.orderIndex},set:function(e){this.orderIndex=e,this.params.order=this.orderArr[e].order,this.params.dir=this.orderArr[e].dir,this.getCharactersForPage(1)}}}},v=(r(909),Object(o.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("Row",[r("Col",{attrs:{span:"3"}},[r("Select",{attrs:{placeholder:"稀有度"},on:{change:function(t){return e.getCharactersForPage(1)}},model:{value:e.params.rare,callback:function(t){e.$set(e.params,"rare",t)},expression:"params.rare"}},[r("Option",{attrs:{value:0}},[e._v("All")]),e._v(" "),e._l(e.typeObj,(function(t,a){return r("Option",{key:a+33,attrs:{value:a}},[e._v(e._s(t))])}))],2)],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Select",{attrs:{placeholder:"排序條件"},model:{value:e.calcOrder,callback:function(t){e.calcOrder=t},expression:"calcOrder"}},e._l(e.orderArr,(function(t,a){return r("Option",{key:a,attrs:{value:a}},[e._v(e._s(t.text))])})),1)],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Button",{attrs:{loading:e.isLoading,type:"success",long:"",icon:"ios-search"},on:{click:function(t){return e.getCharactersForPage()}}},[e._v("\n                計算\n            ")])],1)],1),e._v(" "),r("Page",{attrs:{total:e.listings,"page-size":+e.params.limit,"show-sizer":"","page-size-opts":[10,20,50,200,400,1e3,2e3,3e3],"prev-text":"Previous","next-text":"Next"},on:{"on-change":e.getCharactersForPage,"on-page-size-change":e.handlePageLimit}}),e._v(" "),r("Row",[r("Col",{attrs:{span:"3"}},[r("Input",{attrs:{clearable:"",placeholder:"編號"},model:{value:e.filterNo,callback:function(t){e.filterNo=t},expression:"filterNo"}})],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Input",{attrs:{clearable:"",placeholder:"英雄"},model:{value:e.filterHero,callback:function(t){e.filterHero=t},expression:"filterHero"}})],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Input",{attrs:{clearable:"",placeholder:"職業"},model:{value:e.filterClass,callback:function(t){e.filterClass=t},expression:"filterClass"}})],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Select",{attrs:{placeholder:"稀有度以上"},model:{value:e.filterType,callback:function(t){e.filterType=t},expression:"filterType"}},e._l(e.typeObj,(function(t,a){return r("Option",{key:a,attrs:{value:a}},[e._v(e._s(t))])})),1)],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Select",{attrs:{placeholder:"稀有度以下"},model:{value:e.filterType2,callback:function(t){e.filterType2=t},expression:"filterType2"}},e._l(e.typeObj,(function(t,a){return r("Option",{key:t+a,attrs:{value:a}},[e._v(e._s(t))])})),1)],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Input",{attrs:{clearable:"",placeholder:"等級"},model:{value:e.filterLevel,callback:function(t){e.filterLevel=t},expression:"filterLevel"}})],1),e._v(" "),r("Col",{attrs:{span:"3"}},[r("Input",{attrs:{clearable:"",placeholder:"價格"},model:{value:e.filterMoney,callback:function(t){e.filterMoney=t},expression:"filterMoney"}})],1)],1),e._v(" "),r("div",{staticClass:"flex"},e._l(e.columns,(function(t){return r("div",{key:t.key,staticClass:"center"},[e._v(e._s(t.title))])})),0),e._v(" "),r("VirtualList",{staticStyle:{height:"calc(100vh - 270px)","overflow-y":"auto"},attrs:{"data-key":"tokenId","data-sources":e.tableData,"data-component":e.item}})],1)}),[],!1,null,"4bd89b88",null));t.default=v.exports}}]);
//# sourceMappingURL=Marketcc32e084affe65c378e6.js.map